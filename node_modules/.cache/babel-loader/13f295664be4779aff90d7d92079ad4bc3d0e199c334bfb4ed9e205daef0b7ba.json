{"ast":null,"code":"var p = (r, e, s) => {\n  if (!e.has(r)) throw TypeError(\"Cannot \" + s);\n};\nvar i = (r, e, s) => (p(r, e, \"read from private field\"), s ? s.call(r) : e.get(r)),\n  u = (r, e, s) => {\n    if (e.has(r)) throw TypeError(\"Cannot add the same private member more than once\");\n    e instanceof WeakSet ? e.add(r) : e.set(r, s);\n  },\n  d = (r, e, s, t) => (p(r, e, \"write to private field\"), t ? t.call(r, s) : e.set(r, s), s);\nimport { Passage as f, PassageError as h, PassageErrorCode as P, ReadOnlyTokenStore as m } from \"@passageidentity/passage-js\";\nimport y from \"jwt-decode\";\nvar g = class extends m {\n    constructor(s) {\n      super();\n      this.externalToken = s;\n    }\n    getAuthToken() {\n      return Promise.resolve(this.externalToken);\n    }\n  },\n  o,\n  n,\n  c = class {\n    constructor(e) {\n      u(this, o, void 0);\n      u(this, n, void 0);\n      let s, t;\n      e !== void 0 ? (s = e, t = new g(s)) : s = localStorage.getItem(\"psg_auth_token\");\n      let a = this._getAppId(s),\n        l = new f(a, {\n          tokenStore: t\n        });\n      d(this, o, l.getCurrentUser()), d(this, n, l.getCurrentSession());\n    }\n    _getAppId(e) {\n      let s = new h(\"No Passsage authToken found\", {\n        status: P.PSGLoginRequired,\n        statusText: \"Login required\"\n      });\n      if (e === null) throw s;\n      let t = y(e);\n      if (t !== void 0 && t.aud !== void 0 && Array.isArray(t.aud) && t.aud[1] !== void 0) return t.aud[1];\n      if (t !== void 0 && t.iss !== void 0) {\n        let a = t.iss.split(\"/\");\n        return a[a.length - 1];\n      }\n      throw s;\n    }\n    authGuard() {\n      return i(this, n).authGuard();\n    }\n    async userInfo() {\n      return i(this, o).userInfo();\n    }\n    async signOut() {\n      return i(this, n).signOut();\n    }\n    async getAuthToken() {\n      return i(this, n).getAuthToken();\n    }\n    async refresh() {\n      return (await i(this, n).refresh()).auth_token;\n    }\n  };\no = new WeakMap(), n = new WeakMap();\nexport { c as PassageUser };\n//#","map":{"version":3,"names":["p","r","e","s","has","TypeError","i","call","get","u","WeakSet","add","set","d","t","Passage","f","PassageError","h","PassageErrorCode","P","ReadOnlyTokenStore","m","y","g","constructor","externalToken","getAuthToken","Promise","resolve","o","n","c","localStorage","getItem","a","_getAppId","l","tokenStore","getCurrentUser","getCurrentSession","status","PSGLoginRequired","statusText","aud","Array","isArray","iss","split","length","authGuard","userInfo","signOut","refresh","auth_token","WeakMap","PassageUser"],"sources":["/Users/ingridf/Documents/chase-runner/node_modules/@passageidentity/passage-elements/dist/package/PassageUser/index.mjs"],"sourcesContent":["var p=(r,e,s)=>{if(!e.has(r))throw TypeError(\"Cannot \"+s)};var i=(r,e,s)=>(p(r,e,\"read from private field\"),s?s.call(r):e.get(r)),u=(r,e,s)=>{if(e.has(r))throw TypeError(\"Cannot add the same private member more than once\");e instanceof WeakSet?e.add(r):e.set(r,s)},d=(r,e,s,t)=>(p(r,e,\"write to private field\"),t?t.call(r,s):e.set(r,s),s);import{Passage as f,PassageError as h,PassageErrorCode as P,ReadOnlyTokenStore as m}from\"@passageidentity/passage-js\";import y from\"jwt-decode\";var g=class extends m{constructor(s){super();this.externalToken=s}getAuthToken(){return Promise.resolve(this.externalToken)}},o,n,c=class{constructor(e){u(this,o,void 0);u(this,n,void 0);let s,t;e!==void 0?(s=e,t=new g(s)):s=localStorage.getItem(\"psg_auth_token\");let a=this._getAppId(s),l=new f(a,{tokenStore:t});d(this,o,l.getCurrentUser()),d(this,n,l.getCurrentSession())}_getAppId(e){let s=new h(\"No Passsage authToken found\",{status:P.PSGLoginRequired,statusText:\"Login required\"});if(e===null)throw s;let t=y(e);if(t!==void 0&&t.aud!==void 0&&Array.isArray(t.aud)&&t.aud[1]!==void 0)return t.aud[1];if(t!==void 0&&t.iss!==void 0){let a=t.iss.split(\"/\");return a[a.length-1]}throw s}authGuard(){return i(this,n).authGuard()}async userInfo(){return i(this,o).userInfo()}async signOut(){return i(this,n).signOut()}async getAuthToken(){return i(this,n).getAuthToken()}async refresh(){return(await i(this,n).refresh()).auth_token}};o=new WeakMap,n=new WeakMap;export{c as PassageUser};\n//# "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}