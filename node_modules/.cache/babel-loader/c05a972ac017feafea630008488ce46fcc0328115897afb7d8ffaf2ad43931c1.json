{"ast":null,"code":"import { resetLoginForm } from \"./loginForm.js\";\nimport { fetchRuns, clearRuns } from \"./fetchRuns.js\";\n\n// synchronous action creators\nexport const setCurrentUser = user => {\n  return {\n    type: \"SET_CURRENT_USER\",\n    user\n  };\n};\nexport const clearCurrentUser = () => {\n  return {\n    type: \"CLEAR_CURRENT_USER\"\n  };\n};\n\n// asynchronous action creators\n\n// export const login = (credentials, history) => {\n//     console.log(credentials, history, 'history')\n//     return async (dispatch) => {\n//         try{ \n//         const resp = await fetch('http://localhost:3001/api/v1/login', {\n//             credentials: 'include',\n//             method: 'POST',\n//             headers: {\n//               'Content-Type': 'application/json',\n//             },\n//             body: JSON.stringify(credentials),\n//           });\n//           const user = await resp.json();\n//                 if(user.error){\n//                     alert(user.error)\n//                 } else {\n//                     dispatch({ type: 'SET_CURRENT_USER', user: user })\n//                     dispatch(fetchRuns())\n//                     dispatch(resetLoginForm())\n//                     console.log(history, 'history')\n//                     history.push('/profile')                  \n//                 }\n//         } catch(error){\n//             console.log(error)\n//         } \n//         };\n// }\nexport const login = (credentials, history) => {\n  return dispatch => {\n    dispatch({\n      type: 'SET_CURRENT_USER',\n      user: credentials.username\n    });\n    dispatch(fetchRuns());\n    dispatch(resetLoginForm());\n    //history.push('/profile')\n\n    //    return fetch('http://localhost:3000/api/v1/login', {\n    //         credentials: \"include\",\n    //         method: 'POST',\n    //         headers: {\n    //             \"Content-Type\": \"application/json\"\n    //         },\n    //         body: JSON.stringify(credentials)\n    //     })\n    //     .then(resp => {return resp.json()})\n    //     .then(user => { \n    //         if(user.error){\n    //             alert(user.error)\n    //         } else {\n    //             dispatch({ type: 'SET_CURRENT_USER', user: user })\n    //             dispatch(fetchRuns())\n    //             dispatch(resetLoginForm())\n    //             history.push('/profile')\n\n    //         }\n    //     })\n    //     .catch(console.log)\n  };\n};\n\nexport const logout = event => {\n  return dispatch => {\n    dispatch(clearCurrentUser());\n    dispatch(clearRuns());\n    return fetch('http://localhost:3000/api/v1/logout', {\n      credentials: \"include\",\n      method: \"DELETE\"\n    });\n  };\n};\nexport const getCurrentUser = () => {\n  return null;\n  // console.log(\"DISPATCHING GET CURRENT USER\")\n  // return(dispatch) => {\n  // return fetch('http://localhost:3000/api/v1/get_current_user', {\n  //     credentials: \"include\",\n  //     method: 'GET',\n  //     headers: {\n  //         \"Content-Type\": \"application/json\"\n  //     }\n  // })\n  // .then(resp => {return resp.json()})\n  // .then(user => { \n  //     if(user.error){\n  //         alert(user.error)\n  //     } else {\n  //         dispatch(setCurrentUser(user))\n  //     }\n  // })\n\n  // };\n};","map":{"version":3,"names":["resetLoginForm","fetchRuns","clearRuns","setCurrentUser","user","type","clearCurrentUser","login","credentials","history","dispatch","username","logout","event","fetch","method","getCurrentUser"],"sources":["/Users/ingridf/Documents/chase-runner/src/actions/currentUser.js"],"sourcesContent":["import { resetLoginForm } from \"./loginForm.js\"\nimport { fetchRuns, clearRuns } from \"./fetchRuns.js\"\n\n\n// synchronous action creators\nexport const setCurrentUser = user =>  {\n    return {\n        type: \"SET_CURRENT_USER\",\n        user\n    }\n}\n\nexport const clearCurrentUser = () => {\n    return {\n        type: \"CLEAR_CURRENT_USER\"\n    }\n}\n\n// asynchronous action creators\n\n// export const login = (credentials, history) => {\n//     console.log(credentials, history, 'history')\n//     return async (dispatch) => {\n//         try{ \n//         const resp = await fetch('http://localhost:3001/api/v1/login', {\n//             credentials: 'include',\n//             method: 'POST',\n//             headers: {\n//               'Content-Type': 'application/json',\n//             },\n//             body: JSON.stringify(credentials),\n//           });\n//           const user = await resp.json();\n//                 if(user.error){\n//                     alert(user.error)\n//                 } else {\n//                     dispatch({ type: 'SET_CURRENT_USER', user: user })\n//                     dispatch(fetchRuns())\n//                     dispatch(resetLoginForm())\n//                     console.log(history, 'history')\n//                     history.push('/profile')                  \n//                 }\n//         } catch(error){\n//             console.log(error)\n//         } \n//         };\n// }\nexport const login = (credentials, history) => {\n\n    return(dispatch) => {\n\n        dispatch({ type: 'SET_CURRENT_USER', user: credentials.username })\n                  dispatch(fetchRuns())\n                  dispatch(resetLoginForm())\n                   //history.push('/profile')\n\n\n        //    return fetch('http://localhost:3000/api/v1/login', {\n        //         credentials: \"include\",\n        //         method: 'POST',\n        //         headers: {\n        //             \"Content-Type\": \"application/json\"\n        //         },\n        //         body: JSON.stringify(credentials)\n        //     })\n        //     .then(resp => {return resp.json()})\n        //     .then(user => { \n        //         if(user.error){\n        //             alert(user.error)\n        //         } else {\n        //             dispatch({ type: 'SET_CURRENT_USER', user: user })\n        //             dispatch(fetchRuns())\n        //             dispatch(resetLoginForm())\n        //             history.push('/profile')\n                    \n        //         }\n        //     })\n        //     .catch(console.log)\n        };\n}\nexport const logout = event => {\n    return dispatch => {\n        dispatch(clearCurrentUser())\n        dispatch(clearRuns())\n        return fetch('http://localhost:3000/api/v1/logout', {\n            credentials: \"include\",\n            method: \"DELETE\"\n        })\n    }\n}\n\nexport const getCurrentUser = () => {\n    return null;\n    // console.log(\"DISPATCHING GET CURRENT USER\")\n    // return(dispatch) => {\n            // return fetch('http://localhost:3000/api/v1/get_current_user', {\n            //     credentials: \"include\",\n            //     method: 'GET',\n            //     headers: {\n            //         \"Content-Type\": \"application/json\"\n            //     }\n            // })\n            // .then(resp => {return resp.json()})\n            // .then(user => { \n            //     if(user.error){\n            //         alert(user.error)\n            //     } else {\n            //         dispatch(setCurrentUser(user))\n            //     }\n            // })\n\n    // };\n}\n\n"],"mappings":"AAAA,SAASA,cAAc,QAAQ,gBAAgB;AAC/C,SAASC,SAAS,EAAEC,SAAS,QAAQ,gBAAgB;;AAGrD;AACA,OAAO,MAAMC,cAAc,GAAGC,IAAI,IAAK;EACnC,OAAO;IACHC,IAAI,EAAE,kBAAkB;IACxBD;EACJ,CAAC;AACL,CAAC;AAED,OAAO,MAAME,gBAAgB,GAAGA,CAAA,KAAM;EAClC,OAAO;IACHD,IAAI,EAAE;EACV,CAAC;AACL,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAME,KAAK,GAAGA,CAACC,WAAW,EAAEC,OAAO,KAAK;EAE3C,OAAOC,QAAQ,IAAK;IAEhBA,QAAQ,CAAC;MAAEL,IAAI,EAAE,kBAAkB;MAAED,IAAI,EAAEI,WAAW,CAACG;IAAS,CAAC,CAAC;IACxDD,QAAQ,CAACT,SAAS,CAAC,CAAC,CAAC;IACrBS,QAAQ,CAACV,cAAc,CAAC,CAAC,CAAC;IACzB;;IAGX;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;EACA,CAAC;AACT,CAAC;;AACD,OAAO,MAAMY,MAAM,GAAGC,KAAK,IAAI;EAC3B,OAAOH,QAAQ,IAAI;IACfA,QAAQ,CAACJ,gBAAgB,CAAC,CAAC,CAAC;IAC5BI,QAAQ,CAACR,SAAS,CAAC,CAAC,CAAC;IACrB,OAAOY,KAAK,CAAC,qCAAqC,EAAE;MAChDN,WAAW,EAAE,SAAS;MACtBO,MAAM,EAAE;IACZ,CAAC,CAAC;EACN,CAAC;AACL,CAAC;AAED,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAChC,OAAO,IAAI;EACX;EACA;EACQ;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAER;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}